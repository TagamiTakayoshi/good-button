<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>å‹•çš„ã„ã„ã­ãƒœã‚¿ãƒ³</title>
<style>
  .like-button {
    font-size: 40px;  /* ãƒœã‚¿ãƒ³ã‚’ä¸€å›ã‚Šå¤§ãã */
    background-color: transparent;
    color: #ccc;
    border: 2px solid #ccc;
    border-radius: 8px;
    padding: 12px 24px;  /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°èª¿æ•´ */
    cursor: pointer;
    transition: all 0.3s ease;
    margin-right: 10px;  /* ãƒœã‚¿ãƒ³ã¨ã‚«ã‚¦ãƒ³ãƒˆã®é–“éš” */
  }

  .like-button:hover {
    color: #e91e63;
    border-color: #e91e63;
  }

  .like-button.liked {
    color: #e91e63;
    border-color: #e91e63;
  }

  .like-count {
    display: none;  /* åˆæœŸçŠ¶æ…‹ã§éè¡¨ç¤º */
    font-size: 14px;
    color: #333;
    margin-top: 12px; /* ã‚«ã‚¦ãƒ³ãƒˆã¨ãƒœã‚¿ãƒ³ã®ä½ç½®èª¿æ•´ */
  }

  .like-count.visible {
    display: block; /* ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§è¡¨ç¤º */
  }

  /* æ¨ªä¸¦ã³ã«ã™ã‚‹ãŸã‚ã®ã‚¹ã‚¿ã‚¤ãƒ« */
  .like-container {
    display: flex;
    align-items: center;  /* ãƒœã‚¿ãƒ³ã¨ã‚«ã‚¦ãƒ³ãƒˆã‚’ç¸¦ä¸­å¤®ã«åˆã‚ã›ã‚‹ */
    margin-bottom: 20px;
  }
</style>
</head>
<body>
  <div id="like-container">èª­ã¿è¾¼ã¿ä¸­...</div>

  <script>
    const baseUrl = 'https://script.google.com/macros/s/AKfycbwL_3gxmoT4P056qSwi2TBhFAd00bxPgqis53T8p1w3bZXi-RhMeXadgz3y_rFevwaG0g/exec';
    const container = document.getElementById('like-container');
    container.innerHTML = ''; // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¶ˆã™

    fetch(`${baseUrl}?all=true`)
      .then(res => res.json())
      .then(data => {
        for (const id in data) {
          const button = document.createElement('button');
          button.className = 'like-button';
          button.dataset.id = id;
          button.innerText = ` ğŸ‘ğŸ¼ Good!`;

          const count = document.createElement('p');
          count.id = `count-${id}`;
          count.className = 'like-count';
          count.innerText = `good: ${data[id]}`;

          const likeContainer = document.createElement('div');
          likeContainer.className = 'like-container';
          likeContainer.appendChild(button);
          likeContainer.appendChild(count);

          container.appendChild(likeContainer);

          button.addEventListener('click', () => {
            button.classList.add('liked');
            fetch(`${baseUrl}?id=${id}`, { method: 'POST' })
              .then(res => res.json())
              .then(updated => {
                count.textContent = `good: ${updated.count}`;
                count.classList.add('visible'); // â† åˆå›ã‚¯ãƒªãƒƒã‚¯ã§è¡¨ç¤º
              });
          });
        }
      })
      .catch(err => {
        container.innerHTML = 'èª­ã¿è¾¼ã¿å¤±æ•—ã—ã¾ã—ãŸğŸ˜¢';
        console.error(err);
      });
  </script>
</body>
</html>
